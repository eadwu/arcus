# Based on react-native-cli and nodejs-jshint
# USAGE:
#   makepkg -csi

pkgname=react-native-cli
pkgver=2.0.1

pkgver() {
  printf "%s" $(npm show ${pkgname} version)
}

pkgrel=1
pkgdesc='React Native CLI tools'
arch=('any')
url='https://facebook.github.io/react-native/'
license=('BSD-3-Clause')
depends=('nodejs')
makedepends=('npm')
source=(
  "${pkgname}-$(pkgver).tgz::https://registry.npmjs.org/${pkgname}/-/${pkgname}-$(pkgver).tgz"
  'https://raw.githubusercontent.com/facebook/react-native/master/LICENSE'
)
noextract=("${pkgname}-$(pkgver).tgz")
sha512sums=(
  '420901d6ead48467bdab5bdca902c87cd74277f41fdcc74d41ed7d40eea556384854a96395530ab5a2bc45a67c3c2341fdc75794efc6ded2941a4fa084c5c4eb'
  '71206f59e5d0b29d7023d3d014b4b61e567ad543cfb8a5a3a202a271c209b04a066b7c8ae43acc84e73f1cbd897bd73a45b7eba282dbe4f6843f5bc42ce07bf3'
)

package() {
  cd ${srcdir}
  local _npmdir="${pkgdir}/usr/lib/node_modules/"
  mkdir -p ${_npmdir}
  cd ${_npmdir}
  npm install -g --user root --prefix "${pkgdir}/usr" ${pkgname}@$(pkgver)
}
