# Based on react-native-cli and nodejs-jshint
# USAGE:
#   makepkg -csi

pkgname=react-native-cli
pkgver=2.0.1

pkgver() {
  printf "%s" $(npm show ${pkgname} version)
}

pkgrel=1
pkgdesc='React Native CLI tools'
arch=('any')
url='https://facebook.github.io/react-native/'
license=('BSD-3-Clause')
depends=('nodejs')
makedepends=('npm')
source=(
  "${pkgname}-$(pkgver).tgz::https://registry.npmjs.org/${pkgname}/-/${pkgname}-$(pkgver).tgz"
  'https://raw.githubusercontent.com/facebook/react-native/master/LICENSE'
)
noextract=("${pkgname}-$(pkgver).tgz")
sha512sums=(
  'SKIP'
  'b51daaa28d171b259f7ba3f58114606ae460eedf7ce044bdcba9231569c91d2e8bbb028b3b15e572b571493f0d76ec41ae93e777be164d515320d6800dfac66e'
)

package() {
  cd ${srcdir}
  local _npmdir="${pkgdir}/usr/lib/node_modules/"
  mkdir -p ${_npmdir}
  cd ${_npmdir}
  npm install -g --user root --prefix "${pkgdir}/usr" ${pkgname}@$(pkgver)
}
